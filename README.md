# FISH-data-processing


## Установка
Для установки всех зависимостей и запуска каждого из приложений, установите зависимости из файла `requirements_for_all_applications.txt`
Установка зависимостей выполняется командой:
```bash
pip install -r requirements_for_all_applications.txt
```
Для установки зависимостей под конкретное приложение, перейдите в директорию этого приложения и установите соответствующий `requirements.txt`
Установка зависимостей выполнится командами, относительно положения `\FISH-data-processing\FISH segmentation\`
```bash
cd Application_Tkinter
pip install -r requirements.txt
```

## Запуск
Для запуска графического приложения написанного на Qt перейдите в папку Application_Qt и запустите файл `Application_Qt_.py`
```bash
python Application_Qt.py
```

Для запуска графического приложения написанного на Tkinter перейдите в папку Application_Tkinter и запустите файл `Application_Tkinter.py`
```bash
python Application_Tkinter.py
```
Для запуска консольного обработчика перейдите в папку Application_Console и запустите файл `console_app.py`

```bash
python console_app.py -i ../data/test.czi -t 0.3
```
## Функционал Графического приложения на Tkinter
![image](https://github.com/CG-UNN-LAB/FISH-data-processing/assets/73434195/cb33f003-ff4d-43a3-ac7b-d959e356e66a)


### Левая часть приложения (CZI_TO_JPG)

Левая часть приложения предназначена для перевода изображений из формата ".czi" в формат ".jpg". 

Кнопка `Select image for image translation` открывает диалоговое окно, в котором необходимо выбрать изображение в формате ".czi"

Далее, полученное изображение будет отображено в поле расположенном выше "YOUR IMAGE JPG"

![image](https://github.com/CG-UNN-LAB/FISH-data-processing/assets/73434195/45a2fb5f-5886-4c38-b4b3-ae9be69c7182)

Следующим действием, пользователю предоставляется выбор в том, что необходимо сделать с изображением:
  - Если его не устраивает данное изображение и необходимо выбрать другое,<br> то он снова нажимает на кнопку `Select image for image translation`
  - Если ему необходимо сохранить данное изображение, то он нажимает кнопку `Save your convert image`

Если пользователь решил сохранить своё изображение, то перед ним снова откроется диалоговое окно, в которое необходимо будет вписать **ТОЛЬКО НАЗВАНИЕ** нового файла. Расширение будет установлено автоматически ".jpg"

![image](https://github.com/CG-UNN-LAB/FISH-data-processing/assets/73434195/256991f3-a18d-4da2-bcc1-cc6796eeecb4)

### Правая часть приложения (PREDICT_YOUR_IMAGE)

Правая часть приложения предназначена для создания предсказаний по вашим изображениям, что покажут с заданным порогом точности количество целых и лопнувших клеток.

Сначала необходимо указать порог точности от **0.1** до **0.9**. Чем больше величина порога точности, тем придирчивее будет предсказание, тем самым некоторые неочевидные случаи будут отброшены.

После того, как пользователь задал необходимый порог точности, он должен нажать на кнопку `Predict your image`. Данная кнопка откроет очередное диалоговое окно, в котором необходимо выбрать изображение, предсказание по которому вы хотите увидеть. 

![image](https://github.com/CG-UNN-LAB/FISH-data-processing/assets/73434195/c682a9e9-213b-48b3-852d-b47f1679ad24)

!ВАЖНО таким образом, ***Не обязательно подготавливать изображение в формате ".CZI"***, если пользователь уже обладает нужными ему изображениями в форматах " jpeg, jpg, png" и др. Тогда ему достаточно пользоваться фунционалом правой части приложения и сразу отправлять изображение, чтобы получить предсказание.

После выбора нужного изображения, в окне расположенном выше "YOUR PREDICT IMAGE" будет отображено предсказание, с обведёнными labels. А поверх набочего окна будет показано диалоговое окно "RESULT_PREDICT" В котором будет выведена основная информация предсказания: Кол-во целых клеток, Кол-во взорвавшихся клеток, Время предсказания.

![image](https://github.com/CG-UNN-LAB/FISH-data-processing/assets/73434195/571a19d7-6001-4050-8ca8-0c08ec68b8e9)

Если необходимо повторно показать информацию последнего предсказания, следует нажать на кнопку `Show help on prediction result`
